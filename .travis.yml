# Build only pushed (merged) master or any pull request. This avoids the
# pull request to be build twice.
branches:
  only:
    - master
language: csharp
dotnet: 2.2.0
mono: none
solution: RoeiJeRot.sln
addons:
  snaps:
    - name: dotnet-sdk
      classic: true
      channel: latest/beta
os:
  - windows
stages:
  - build
  - test
jobs:
  include:
    - stage: build
      name: build-solution
      before_script:
        - sudo snap alias dotnet-sdk.dotnet dotnet
      script: dotnet restore && dotnet build
    - stage: test
      name: run-tests
      script: dotnet test ./TikTok.Test/TikTok.Test.csproj 